<div class="container">
  <p class="search-number">
    <%= @fields_search.current_page %>ページ目を表示 / 全<%= @fields_search.total_count %>ページ
  </p>
</div>
<div class="row">
  <div class="d-flex align-items-center flex-column my-5">
    <h2>
      <span class="page-title">S</span>
      <span class="page-title">E</span>
      <span class="page-title">A</span>
      <span class="page-title">R</span>
      <span class="page-title">C</span>
      <span class="page-title">H</span>
      <span class="page-title">-</span>
      <span class="page-title">R</span>
      <span class="page-title">E</span>
      <span class="page-title">S</span>
      <span class="page-title">U</span>
      <span class="page-title">L</span>
      <span class="page-title">T</span>
      <span class="page-title">S</span>
    </h2>
    <h3 class="camp-search text-center"><%= "検索結果:#{@fields_search.total_count}件" %></h3>
  </div>
  <% if @fields.length != 0 %>
    <% @fields.each do |field| %>
      <div class="col-sm-12 col-md-6 col-lg-4">
        <div class="card shadow bg-white rounded">
          <%= image_tag("https://picsum.photos/244") %>
          <%#= image_tag fields.image.url, class:"card-img-top" %>
          <div class="card-body px-2 py-3">
            <h5 class="card-title">
              <%= link_to field.name, field_path(field) %>
            </h5>
            <div class="small-block">
              <i class="fas fa-map-marker-alt"></i>
              <cite title="<%= field.address %>">
              <%= field.address %>
            </div>
            <div class="small-block">
              <i class="fas fa-phone fa-fw"></i>
              <a href="<%= field.phone_number %>"><%= field.phone_number %></a>
            </div>
            <div class="small-block">
              <i class="fas fa-yen-sign"></i>
              区画サイト：<%= field.section_site %>
            </div>
            <div class="small-block">
              <i class="fas fa-yen-sign"></i>
              フリーサイト：<%= field.free_site %>
            </div>
            <div class="small-block">
              <i class="fas fa-mobile-alt"></i>
              <%= field.reservation %>
            </div>
            <div class="small-block">
              <i class="fas fa-clock"></i>
              <%= field.check_in_out %>
            </div>
            <div class="star-review" data-score="<%#= rating(fields.reviews) %>"></div>
            <div class="score-review">
              <%#= rating(fields.reviews) %>
            </div>
            <p class="count-review">
              <i class="fa fa-comments"></i>
              <%#= field.reviews.count %>
            </p>
            <p class="hash_tags">
              <i class="fas fa-tags"></i> 
              <%# fields.hash_tags.each do |hash_tag| %>
                <%#= link_to hash_tag.tag, results_path(q: { hash_tags_id_in: [hash_tag.id] }) %> <!-- 配列じゃないと検索できないため、idを[]で括っている -->
              <%# end %>
            </p>
          </div>
        </div>
      </div>
    <% end %>
  <% else %>
  <div class="text-center">
    キャンプ場は見つかりませんでした
  </div>
  <% end %>
</div>
<%= paginate @fields_search %>
